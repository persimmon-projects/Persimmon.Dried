<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Practical Persimmon.Dried
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Random testing for Persimmon.">
    <meta name="author" content="persimmon-projects">

    <script type="text/javascript" src="/Persimmon.Dried/content/tips.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.2/jquery-ui.min.js"></script>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="/Persimmon.Dried/content/style.css" />
    <link type="text/css" rel="stylesheet" href="/Persimmon.Dried/content/font.css" />
    <link rel="shortcut icon" href="/Persimmon.Dried/images/favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="icon" href="/Persimmon.Dried/images/favicon.ico" type="image/vnd.microsoft.icon" />
  </head>
  <body>
    <div class="container">
      <div class="blog-header">
        <h2 class="blog-title"><a href="/Persimmon.Dried/index.html">Persimmon.Dried</a></h2>
      </div>
      <hr />
      <div class="row">
        <div class="col-sm-9 blog-main" id="main">
          
<div class="blog-post">
<h1><a name="Practical-Persimmon-Dried" class="anchor" href="#Practical-Persimmon-Dried">Practical Persimmon.Dried</a></h1>
<h2><a name="Arbitray" class="anchor" href="#Arbitray">Arbitray</a></h2>
<p>You can use arbitraries flexibly: there are various arbitraries for basic types like <code>Arb.int</code>, <code>Arb.byte</code> and <code>Arb.string</code>, and for collection types like <code>Arb.list Arb.int</code>, <code>Arb.array Arb.float</code> and <code>Arb.map Arb.int Arb.string</code>.</p>
<p>You can also use arbitraries for functions or <code>System.Func</code>:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// generate F# function (int -&gt; int)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">``function as parameter``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span class="i">func</span> <span class="i">CoArb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">int</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="i">int</span>)(<span class="k">fun</span> <span class="i">f</span> <span class="k">-&gt;</span>
  <span class="i">f</span> (<span class="i">f</span> <span class="n">0</span>) <span class="o">=</span> (<span class="i">f</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span class="i">f</span>) <span class="n">0</span>
)

<span class="c">// generate System.Func&lt;int, string&gt;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="i">``System.Func as parameter``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span class="i">systemFunc</span>(<span class="i">CoArb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="i">int</span>, <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="i">string</span>))(<span class="k">fun</span> <span class="i">f</span> <span class="k">-&gt;</span>
  <span class="i">f</span><span class="o">.</span><span class="i">Invoke</span>(<span class="n">0</span>) <span class="o">=</span> <span class="s">&quot;0&quot;</span>
)
</code></pre></td>
</tr>
</table>
<p>A module <code>CoArb</code> represents the module of “arbitraries for functions (which are arbitraries)”.</p>
<p>If you want to treat arbitraries of collection types as non-empty or non-null, you can:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// non empty int list</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="i">``non empty list``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span class="i">nonEmpty</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="i">list</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 10)" onmouseover="showTip(event, 'fs3', 10)" class="i">int</span>), <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 11)" onmouseover="showTip(event, 'fs3', 11)" class="i">int</span>)(<span class="k">fun</span> <span class="i">xs</span> <span class="i">i</span> <span class="k">-&gt;</span>
  <span onmouseout="hideTip(event, 'fs8', 12)" onmouseover="showTip(event, 'fs8', 12)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 13)" onmouseover="showTip(event, 'fs9', 13)" class="i">head</span> <span class="i">xs</span> <span class="o">=</span> <span class="i">i</span>
)

<span class="c">// non null string []</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 14)" onmouseover="showTip(event, 'fs10', 14)" class="i">``non null array``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span class="i">nonNull</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="i">array</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 16)" onmouseover="showTip(event, 'fs5', 16)" class="i">string</span>))(<span class="k">fun</span> <span class="i">xs</span> <span class="k">-&gt;</span>
  <span onmouseout="hideTip(event, 'fs12', 17)" onmouseover="showTip(event, 'fs12', 17)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 18)" onmouseover="showTip(event, 'fs13', 18)" class="i">length</span> <span class="i">xs</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">0</span>
)
</code></pre></td>
</tr>
</table>
<h2><a name="Arbitrary-and-Gen" class="anchor" href="#Arbitrary-and-Gen">Arbitrary and Gen</a></h2>
<p>When you use Persimmon.Dried, you may want to generate arguments as well as you think. You can make another arbitrary from the present one.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// generate int list arguments whose length are no more than 3</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 19)" onmouseover="showTip(event, 'fs14', 19)" class="i">arbLs</span> <span class="o">=</span> {
  <span class="i">Gen</span> <span class="o">=</span> <span class="i">Gen</span><span class="o">.</span><span class="i">listOfMaxLength</span> <span class="n">3</span> <span class="o">&lt;|</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 20)" onmouseover="showTip(event, 'fs3', 20)" class="i">int</span><span class="o">.</span><span class="i">Gen</span>
  <span class="i">Shrinker</span> <span class="o">=</span> <span class="i">Shrink</span><span class="o">.</span><span class="i">shrinkList</span> <span class="o">&lt;|</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 21)" onmouseover="showTip(event, 'fs3', 21)" class="i">int</span><span class="o">.</span><span class="i">Shrinker</span>
  <span class="i">PrettyPrinter</span> <span class="o">=</span> <span class="i">Pretty</span><span class="o">.</span><span class="i">prettyList</span>
}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="i">``list of max length 3``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="i">arbLs</span>)(<span class="k">fun</span> <span class="i">xs</span> <span class="k">-&gt;</span>
  <span onmouseout="hideTip(event, 'fs8', 24)" onmouseover="showTip(event, 'fs8', 24)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 25)" onmouseover="showTip(event, 'fs9', 25)" class="i">length</span> <span class="i">xs</span> <span class="o">&lt;=</span> <span class="n">3</span>
)
</code></pre></td>
</tr>
</table>
<p>The basic arbitraries are F# records which have 3 values (labels), <code>Gen</code>, <code>Shrinker</code> and <code>PrettyPrinter</code>. In these labels, <code>Gen</code> : <code>Gen&lt;'T&gt;</code> takes charge of generating values, so controling it makes the result better.</p>
<p><code>Gen</code> module has a lot of useful functions fo <em>Gen<'T></em> values. There are examples in the following subsections.</p>
<h3><a name="oneOf" class="anchor" href="#oneOf">oneOf</a></h3>
<p><code>oneOf</code> function takes a sequence of <em>Gen<'T></em> then returns one of elements in it.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// use one of Gen element in the sequence</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="i">arbOneOf</span> <span class="o">=</span> {
  <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 27)" onmouseover="showTip(event, 'fs3', 27)" class="i">int</span> <span class="k">with</span> <span class="i">Gen</span> <span class="o">=</span> <span class="i">Gen</span><span class="o">.</span><span class="i">oneOf</span> <span class="o">&lt;|</span> <span onmouseout="hideTip(event, 'fs8', 28)" onmouseover="showTip(event, 'fs8', 28)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 29)" onmouseover="showTip(event, 'fs9', 29)" class="i">map</span> <span class="i">Gen</span><span class="o">.</span><span class="i">constant</span> [<span class="n">2</span>; <span class="n">3</span>; <span class="n">5</span>; <span class="n">7</span>]
}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 30)" onmouseover="showTip(event, 'fs17', 30)" class="i">``get one of prime numbers``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span onmouseout="hideTip(event, 'fs16', 31)" onmouseover="showTip(event, 'fs16', 31)" class="i">arbOneOf</span>)(<span class="k">fun</span> <span class="i">i</span> <span class="k">-&gt;</span>
  <span class="k">let</span> <span class="i">contains</span> <span class="i">v</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 32)" onmouseover="showTip(event, 'fs8', 32)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 33)" onmouseover="showTip(event, 'fs9', 33)" class="i">exists</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">=</span> <span class="i">v</span>)
  <span class="i">contains</span> <span class="i">i</span> [<span class="n">1</span> <span class="o">..</span> <span class="n">10</span>]    <span class="c">// [2; 3; 5; 7] ⊂ [1 .. 10]</span>
)
</code></pre></td>
</tr>
</table>
<h3><a name="suchThat" class="anchor" href="#suchThat">suchThat</a></h3>
<p><code>suchThat</code> function takes <em>Gen<'T></em> value and a condition function, then returns <em>Gen<'T></em> to generate values which satisfy the condition.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// generate values satisfying the condition</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 34)" onmouseover="showTip(event, 'fs18', 34)" class="i">arbEven</span> <span class="o">=</span> {
  <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 35)" onmouseover="showTip(event, 'fs3', 35)" class="i">int</span> <span class="k">with</span> <span class="i">Gen</span> <span class="o">=</span> <span class="i">Gen</span><span class="o">.</span><span class="i">suchThat</span> (<span class="k">fun</span> <span class="i">i</span> <span class="k">-&gt;</span> <span class="i">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">=</span> <span class="n">0</span>) <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 36)" onmouseover="showTip(event, 'fs3', 36)" class="i">int</span><span class="o">.</span><span class="i">Gen</span>  <span class="c">// filter only even number</span>
}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 37)" onmouseover="showTip(event, 'fs19', 37)" class="i">``only even number``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span onmouseout="hideTip(event, 'fs18', 38)" onmouseover="showTip(event, 'fs18', 38)" class="i">arbEven</span>)(<span class="k">fun</span> <span class="i">i</span> <span class="k">-&gt;</span>
  (<span class="i">i</span> <span class="o">*</span> <span class="i">i</span>) <span class="o">%</span> <span class="n">4</span> <span class="o">=</span> <span class="n">0</span>
)
</code></pre></td>
</tr>
</table>
<h3><a name="listOfLength" class="anchor" href="#listOfLength">listOfLength</a></h3>
<p><code>listOfLength</code> function takes a length number <em>N</em> and <em>Gen<'T></em>, then returns <em>Gen<'T list></em> which generates N-length ‘T list.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// generate int lists whose length is 3</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 39)" onmouseover="showTip(event, 'fs20', 39)" class="i">arbList3</span> <span class="o">=</span> {
  <span class="i">Gen</span> <span class="o">=</span> <span class="i">Gen</span><span class="o">.</span><span class="i">listOfLength</span> <span class="n">3</span> <span class="o">&lt;|</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 40)" onmouseover="showTip(event, 'fs3', 40)" class="i">int</span><span class="o">.</span><span class="i">Gen</span>
  <span class="i">Shrinker</span> <span class="o">=</span> <span class="i">Shrink</span><span class="o">.</span><span class="i">shrinkList</span> <span class="o">&lt;|</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 41)" onmouseover="showTip(event, 'fs3', 41)" class="i">int</span><span class="o">.</span><span class="i">Shrinker</span>
  <span class="i">PrettyPrinter</span> <span class="o">=</span> <span class="i">Pretty</span><span class="o">.</span><span class="i">prettyList</span>
}

<span class="c">// generate int lists whose length is 5</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 42)" onmouseover="showTip(event, 'fs21', 42)" class="i">arbList5</span> <span class="o">=</span> {
  <span onmouseout="hideTip(event, 'fs20', 43)" onmouseover="showTip(event, 'fs20', 43)" class="i">arbList3</span> <span class="k">with</span> <span class="i">Gen</span> <span class="o">=</span> <span class="i">Gen</span><span class="o">.</span><span class="i">listOfLength</span> <span class="n">5</span> <span class="o">&lt;|</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 44)" onmouseover="showTip(event, 'fs3', 44)" class="i">int</span><span class="o">.</span><span class="i">Gen</span>
}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 45)" onmouseover="showTip(event, 'fs22', 45)" class="i">``list of length``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span onmouseout="hideTip(event, 'fs20', 46)" onmouseover="showTip(event, 'fs20', 46)" class="i">arbList3</span>, <span onmouseout="hideTip(event, 'fs21', 47)" onmouseover="showTip(event, 'fs21', 47)" class="i">arbList5</span>)(<span class="k">fun</span> <span class="i">xs3</span> <span class="i">xs5</span> <span class="k">-&gt;</span>
  <span onmouseout="hideTip(event, 'fs8', 48)" onmouseover="showTip(event, 'fs8', 48)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 49)" onmouseover="showTip(event, 'fs9', 49)" class="i">length</span> <span class="i">xs3</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs8', 50)" onmouseover="showTip(event, 'fs8', 50)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 51)" onmouseover="showTip(event, 'fs9', 51)" class="i">length</span> <span class="i">xs5</span>
)
</code></pre></td>
</tr>
</table>
<p>There are similar functions such as <code>listOfMaxLength</code> which generates lists less than or equal to length N, and <code>listOfMinLength</code> which generates lists greater than or equal to length N.</p>
<p>If you want to know more about Gen, let’s read <a href="https://github.com/persimmon-projects/Persimmon.Dried/blob/b056641423471b990e385b50db9e50589bfdff4e/src/Persimmon.Dried/Gen.fs">the source code</a>.</p>
<h2><a name="Properties" class="anchor" href="#Properties">Properties</a></h2>
<p>In <code>Prop</code> module, there are useful functions and operators to write properties.</p>
<h3><a name="And-Or-operator" class="anchor" href="#And-Or-operator">And / Or operator</a></h3>
<p>The And operator <code>.&amp;.</code> succeeds if both of properties succeed, otherwise fails.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// lhs .&amp;. lazy rhs succeeds both of lhs and rhs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs23', 52)" onmouseover="showTip(event, 'fs23', 52)" class="i">``and operator``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 53)" onmouseover="showTip(event, 'fs3', 53)" class="i">int</span>, <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 54)" onmouseover="showTip(event, 'fs3', 54)" class="i">int</span>)(<span class="k">fun</span> <span class="i">x</span> <span class="i">y</span> <span class="k">-&gt;</span>
  <span class="i">x</span> <span class="o">+</span> <span class="n">1</span> <span class="o">&gt;</span> <span class="i">x</span> <span class="o">|@</span> <span class="s">&quot;x + 1 is greater than x&quot;</span> <span class="o">.</span><span class="o">&amp;.</span>
  <span class="k">lazy</span> (<span class="i">y</span> <span class="o">-</span> <span class="n">1</span> <span class="o">&lt;</span> <span class="i">y</span> <span class="o">|@</span> <span class="s">&quot;y - 1 is less than y&quot;</span>) <span class="o">.</span><span class="o">&amp;.</span>
  <span class="k">lazy</span> (<span class="i">x</span> <span class="o">*</span> <span class="i">y</span> <span class="o">&gt;</span> <span class="i">x</span> <span class="o">+</span> <span class="i">y</span> <span class="o">|@</span> <span class="s">&quot;x * y is greather than x + y&quot;</span>)  <span class="c">// This property may fail</span>
)
</code></pre></td>
</tr>
</table>
<p>On the other hand, the Or operator <code>.|.</code> succeeds if either property succeeds, fails if both fail.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// lhs .|. lazy rhs succeeds either of lhs and rhs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 55)" onmouseover="showTip(event, 'fs24', 55)" class="i">``or operator``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 56)" onmouseover="showTip(event, 'fs3', 56)" class="i">int</span>, <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 57)" onmouseover="showTip(event, 'fs3', 57)" class="i">int</span>)(<span class="k">fun</span> <span class="i">x</span> <span class="i">y</span> <span class="k">-&gt;</span>
  <span class="s">&quot;x + 1 is greater than x&quot;</span> <span class="o">@|</span> (<span class="i">x</span> <span class="o">+</span> <span class="n">1</span> <span class="o">&gt;</span> <span class="i">x</span>) <span class="o">.</span><span class="o">|.</span>
  <span class="k">lazy</span> (<span class="s">&quot;y - 1 is less than y&quot;</span> <span class="o">@|</span> (<span class="i">y</span> <span class="o">-</span> <span class="n">1</span> <span class="o">&lt;</span> <span class="i">y</span>)) <span class="o">.</span><span class="o">|.</span>
  <span class="k">lazy</span> (<span class="s">&quot;x * y is greather than x + y&quot;</span> <span class="o">@|</span> (<span class="i">x</span> <span class="o">*</span> <span class="i">y</span> <span class="o">&gt;</span> <span class="i">x</span> <span class="o">+</span> <span class="i">y</span>))  <span class="c">// This property may fail</span>
)
</code></pre></td>
</tr>
</table>
<p>If you execute each 2 properties, <em>and operator</em> will fail and <em>or operator</em> will succeed.</p>
<p><code>|@</code> and <code>@|</code> you see in the code snipets above are the labeling operators. You can use them as p |@ s or s @| p, then label p s.</p>
<h3><a name="Conditional-property" class="anchor" href="#Conditional-property">Conditional property</a></h3>
<p><code>==&gt;</code> operator checks a right hand side property only if a left hand side property succeeds.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// lhs ==&gt; lazy rhs checks rhs if lhs succeeds.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 58)" onmouseover="showTip(event, 'fs25', 58)" class="i">``conditional property``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 59)" onmouseover="showTip(event, 'fs3', 59)" class="i">int</span>, <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 60)" onmouseover="showTip(event, 'fs7', 60)" class="i">list</span> <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 61)" onmouseover="showTip(event, 'fs3', 61)" class="i">int</span>)(<span class="k">fun</span> <span class="i">i</span> <span class="i">ls</span> <span class="k">-&gt;</span>
  <span class="k">let</span> <span class="i">ils</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 62)" onmouseover="showTip(event, 'fs8', 62)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 63)" onmouseover="showTip(event, 'fs9', 63)" class="i">Cons</span>(<span class="i">i</span>, <span class="i">ls</span>)
  <span onmouseout="hideTip(event, 'fs8', 64)" onmouseover="showTip(event, 'fs8', 64)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 65)" onmouseover="showTip(event, 'fs9', 65)" class="i">length</span> <span class="i">ls</span> <span class="o">&gt;</span> <span class="n">5</span>  <span class="o">==&gt;</span> <span class="k">lazy</span> (<span onmouseout="hideTip(event, 'fs8', 66)" onmouseover="showTip(event, 'fs8', 66)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 67)" onmouseover="showTip(event, 'fs9', 67)" class="i">length</span> <span class="i">ils</span> <span class="o">&gt;</span> <span class="n">6</span>)
)
</code></pre></td>
</tr>
</table>
<p>This snipet checks whether the length of <em>i :: ls</em> is greater than 6 or not if the input list <em>ls</em> has greater length than 5.</p>
<p>Note that the binary operators which take both properties, same as <code>.&amp;.</code> or <code>.|.</code>, must take its right hand side property as <code>lazy</code>. This restriction is for the reason that F# mainly uses eager evaluation. In the case of rasing an exception when the right property is evaluated, the exception is occurred at the time of passing both properties to the operator, then the check fails.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// What if we could...</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 68)" onmouseover="showTip(event, 'fs26', 68)" class="i">``right hand side executes... what?``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 69)" onmouseover="showTip(event, 'fs3', 69)" class="i">int</span>)(<span class="k">fun</span> <span class="i">i</span> <span class="k">-&gt;</span>
  (<span class="i">i</span> <span class="o">+</span> <span class="n">1</span> <span class="o">=</span> <span class="i">i</span>) <span class="o">==&gt;</span> (<span class="i">i</span> <span class="o">/</span> <span class="n">0</span> <span class="o">=</span> <span class="n">0</span>)  <span class="c">// write like this?</span>
)
</code></pre></td>
</tr>
</table>
<h3><a name="Classify-properties" class="anchor" href="#Classify-properties">Classify properties</a></h3>
<p><code>classify</code> function is similar to the labeling operators in the way of naming properties. Moreover, it can classify them by any conditions.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 70)" onmouseover="showTip(event, 'fs27', 70)" class="i">``classifying test case``</span> <span class="o">=</span> <span class="i">Prop</span><span class="o">.</span><span class="i">forAll</span>(<span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 71)" onmouseover="showTip(event, 'fs3', 71)" class="i">int</span>, <span class="i">Arb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 72)" onmouseover="showTip(event, 'fs3', 72)" class="i">int</span>)(<span class="k">fun</span> <span class="i">x</span> <span class="i">y</span> <span class="k">-&gt;</span>
  <span class="i">x</span> <span class="o">+</span> <span class="i">y</span> <span class="o">&gt;</span> <span class="i">x</span>
  <span class="o">|&gt;</span> <span class="i">Prop</span><span class="o">.</span><span class="i">classify</span>(<span class="i">x</span> <span class="o">&lt;</span> <span class="n">0</span>, <span class="s">&quot;x is negative&quot;</span>)
  <span class="o">|&gt;</span> <span class="i">Prop</span><span class="o">.</span><span class="i">classify</span>((<span class="i">x</span> <span class="o">=</span> <span class="n">0</span>), <span class="s">&quot;x is zero&quot;</span>)
  <span class="o">|&gt;</span> <span class="i">Prop</span><span class="o">.</span><span class="i">classify</span>(<span class="i">y</span> <span class="o">&lt;</span> <span class="n">0</span>, <span class="s">&quot;y is negative&quot;</span>)
  <span class="o">|&gt;</span> <span class="i">Prop</span><span class="o">.</span><span class="i">classify</span>((<span class="i">y</span> <span class="o">=</span> <span class="n">0</span>), <span class="s">&quot;y is zero&quot;</span>)
)
</code></pre></td>
</tr>
</table>
<p>When you execute the snipet above, it may show you as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">Runner</span><span class="o">.</span><span class="i">run</span> <span class="s">&quot;&quot;</span> <span onmouseout="hideTip(event, 'fs1', 73)" onmouseover="showTip(event, 'fs1', 73)" class="i">prms</span> <span onmouseout="hideTip(event, 'fs27', 74)" onmouseover="showTip(event, 'fs27', 74)" class="i">``classifying test case``</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>No output has been produced.</code></pre></td></tr></table>
<p>You can get the ratio of failing arguments from here.</p>
</div>

<div class="tip" id="fs1">val prms : obj<br /><br />Full name: Practice.prms</div>
<div class="tip" id="fs2">val ( function as parameter ) : obj<br /><br />Full name: Practice.( function as parameter )</div>
<div class="tip" id="fs3">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs4">val ( System.Func as parameter ) : obj<br /><br />Full name: Practice.( System.Func as parameter )</div>
<div class="tip" id="fs5">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs6">val ( non empty list ) : obj<br /><br />Full name: Practice.( non empty list )</div>
<div class="tip" id="fs7">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs8">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------</div>
<div class="tip" id="fs9"></div>
<div class="tip" id="fs10">val ( non null array ) : obj<br /><br />Full name: Practice.( non null array )</div>
<div class="tip" id="fs11">type &#39;T array = &#39;T []<br /><br />Full name: Microsoft.FSharp.Core.array&lt;_&gt;</div>
<div class="tip" id="fs12">module Array<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs13">val length : array:&#39;T [] -&gt; int<br /><br />Full name: Microsoft.FSharp.Collections.Array.length</div>
<div class="tip" id="fs14">val arbLs : obj<br /><br />Full name: Practice.arbLs</div>
<div class="tip" id="fs15">val ( list of max length 3 ) : obj<br /><br />Full name: Practice.( list of max length 3 )</div>
<div class="tip" id="fs16">val arbOneOf : obj<br /><br />Full name: Practice.arbOneOf</div>
<div class="tip" id="fs17">val ( get one of prime numbers ) : obj<br /><br />Full name: Practice.( get one of prime numbers )</div>
<div class="tip" id="fs18">val arbEven : obj<br /><br />Full name: Practice.arbEven</div>
<div class="tip" id="fs19">val ( only even number ) : obj<br /><br />Full name: Practice.( only even number )</div>
<div class="tip" id="fs20">val arbList3 : obj<br /><br />Full name: Practice.arbList3</div>
<div class="tip" id="fs21">val arbList5 : obj<br /><br />Full name: Practice.arbList5</div>
<div class="tip" id="fs22">val ( list of length ) : obj<br /><br />Full name: Practice.( list of length )</div>
<div class="tip" id="fs23">val ( and operator ) : obj<br /><br />Full name: Practice.( and operator )</div>
<div class="tip" id="fs24">val ( or operator ) : obj<br /><br />Full name: Practice.( or operator )</div>
<div class="tip" id="fs25">val ( conditional property ) : obj<br /><br />Full name: Practice.( conditional property )</div>
<div class="tip" id="fs26">val ( right hand side executes... what? ) : obj<br /><br />Full name: Practice.( right hand side executes... what? )</div>
<div class="tip" id="fs27">val ( classifying test case ) : obj<br /><br />Full name: Practice.( classifying test case )</div>

        </div>
        <div class="col-sm-3 blog-sidebar" id="menu">
          <div class="sidebar-module sidebar-module-inset">
            <a href="/Persimmon.Dried/index.html">
              <img src="/Persimmon.Dried/images/logo.png" style="width:150px;margin:10px" />
            </a>
          </div>

          <div class="sidebar-module">
            <h4>Persimmon.Dried</h4>
            <ul class="list-unstyled">
              <li><a href="https://www.nuget.org/packages/Persimmon.Dried/"><img src="http://img.shields.io/nuget/v/Persimmon.Dried.svg?style=flat" /></a></li>
              <li><a href="https://github.com/persimmon-projects/Persimmon.Dried/blob/master/LICENSE"><img src="https://img.shields.io/github/license/persimmon-projects/Persimmon.Dried.svg" /></a></li>
              <li><a href="/Persimmon.Dried/release-notes.html">Release Notes</a></li>
            </ul>
          </div>

          <div class="sidebar-module">
            <h4>Tutorial</h4>
            <ul class="list-unstyled">
              <li><a href="/Persimmon.Dried/GettingStarted.html">Getting Started</a></li>
              <li><a href="/Persimmon.Dried/Practice.html">Practice</a></li>
            </ul>
          </div>

          <div class="sidebar-module">
            <h4>Reference</h4>
            <ul class="list-unstyled">
              <li><a href="/Persimmon.Dried/reference/index.html">API Reference</a></li>
            </ul>
          </div>

          <div class="sidebar-module">
            <h4>Related projects</h4>
            <ul class="list-unstyled">
              <li><a href="http://persimmon-projects.github.io/Persimmon/">Persimmon</a></li>
              <li><a href="https://github.com/persimmon-projects/FAKE.Persimmon">FAKE.Persimmon</a></li>
              <li><a href="https://github.com/persimmon-projects/Persimmon.Dried.Quotations">Persimmon.Dried.Quotations</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <a href="https://github.com/persimmon-projects/Persimmon.Dried"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
  </body>
</html>
